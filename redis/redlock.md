redis作者针对时钟偏移  说可以通过设置NTPd调整偏移,对redis这种对时钟要求不太高的锁机制是可以容忍的
redis作者认为fencing lock意义不大,因为redis操作的时候也是有CAS,check的锁的随机token.这个前提下是可以保证到锁的成功,不必要多余的fencing lock,能保证互斥就可以

主要分析一种情况是AB两个客户端对同一个资源加锁,A在执行之前被挂起,资源的锁过期然后B客户端加锁成功,A唤醒.这种情况下AB都以为自己对同一个资源获取成功  redis作者认为这种情况没办法,用token也无法解决.

zookeeper的做法是使用和客户端的心跳检测客户端是否在线,还有支持让锁不到资源的客户端等待锁(注意会触发类似惊群效应的羊群效应,锁可以使用的时候给所有客户端发消息)

chubby的做法比较齐全,做法类似fencing lock,通过递增的序列以及CAS保证获取锁的正确性.但是当获取锁的客户端挂起,到了锁过期时间之后服务器不是马上释放锁,而是继续等待一段时间(期间不允许其他客户端访问),让之前有锁的客户端完全释放掉所有的锁,防止之前有锁的客户端唤醒后继续访问资源.


总体来说 我还是觉得redlock 还是可以 只要场景要求不是太严谨  不过要延迟重启