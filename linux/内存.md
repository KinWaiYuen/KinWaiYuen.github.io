## brk机制
### 申请
brk的时候只是把虚拟空间分配了,但是还没有在物理内存进行内存分配.  
在**第一次写/读操作**的时候会触发**缺页中断**,此时内核会分配对应物理内存,虚拟地址空间和物理空间建立映射关系

### 释放
需要连续空间才能释放.

## mmap
### 申请
一个mmap的页是4k.类似brk,内核并没有给新的虚拟内存分配物理映射页.操作之后申请物理内存.  
真正写入的时候会触发N/4k次的页中断.可以理解成每次就一次4k的申请  
### 释放
直接归还释放


## 缺页中断

当没有创建一个虚拟地址到物理地址的映射，或者创建了这样的映射，但那个物理页不可写的时候，MMU将会通知CPU产生了一个缺页异常。

## SIGBUS & SIGSEGV
### SIGBUS
意味着指针所对应的地址是有效地址，但总线不能正常使用该指针。通常是未对齐的数据访问所致。  
例如:mmap的时候fd文件大小是4095,mmap的时候偏移到4096.显然,这个时候其实已经超出了对应虚拟内存的范围,这个地方的**物理内存**有可能会被其他进程使用.所以总线不能正常使用该指针.  
试图访问一块无文件内容对应的内存区域(4k向上取模),就会触发  


### SIGSEGV
意味着指针所对应的地址是无效地址，没有物理内存对应该地址。